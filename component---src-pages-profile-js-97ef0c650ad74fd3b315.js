(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"2mvg":function(e,t,n){"use strict";var r=n("wx14"),a=n("zLVn"),o=n("TSYQ"),i=n.n(o),l=n("q1tI"),c=n.n(l),s=n("vUet"),u=c.a.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,l=e.fluid,u=e.rounded,p=e.roundedCircle,d=e.thumbnail,f=Object(a.a)(e,["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"]);n=Object(s.b)(n,"img");var m=i()(l&&n+"-fluid",u&&"rounded",p&&"rounded-circle",d&&n+"-thumbnail");return c.a.createElement("img",Object(r.a)({ref:t},f,{className:i()(o,m)}))}));u.displayName="Image",u.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1},t.a=u},"3Z9Z":function(e,t,n){"use strict";n("JHok");var r=n("wx14"),a=n("zLVn"),o=n("TSYQ"),i=n.n(o),l=n("q1tI"),c=n.n(l),s=n("vUet"),u=["xl","lg","md","sm","xs"],p=c.a.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,l=e.noGutters,p=e.as,d=void 0===p?"div":p,f=Object(a.a)(e,["bsPrefix","className","noGutters","as"]),m=Object(s.b)(n,"row"),h=m+"-cols",v=[];return u.forEach((function(e){var t,n=f[e];delete f[e];var r="xs"!==e?"-"+e:"";null!=(t=null!=n&&"object"==typeof n?n.cols:n)&&v.push(""+h+r+"-"+t)})),c.a.createElement(d,Object(r.a)({ref:t},f,{className:i.a.apply(void 0,[o,m,l&&"no-gutters"].concat(v))}))}));p.displayName="Row",p.defaultProps={noGutters:!1},t.a=p},"9Emu":function(e,t,n){"use strict";n.r(t),n.d(t,"ProfileTab",(function(){return H}));n("6kNP"),n("q8oJ"),n("8npG");var r=n("o0o1"),a=n.n(r),o=(n("E5k/"),n("ls82"),n("sPse"),n("q1tI")),i=n.n(o),l=n("YwZP"),c=n("qhky"),s=n("Bl7J"),u=n("6xyR"),p=n("2xrC"),d=n("2mvg"),f=n("+YzT"),m=n("3Z9Z"),h=n("JI6e"),v=n("cWnB"),E=(n("qGKJ"),n("ma3e")),b=n("YMZp"),g=n("B5eY"),y=n.n(g);var P=function(e){var t,n;function r(t){return e.call(this,t)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderNav=function(e){var t=this.props,n=t.onTabChange,r=t.tab,a=b.a.isLoggedIn()&&b.a.getToken().username===e.username;return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{fill:!0,variant:"pills",activeKey:r},i.a.createElement(f.a.Item,{onClick:function(){return n(H.OVERVIEW)}},i.a.createElement(f.a.Link,{eventKey:"overview"},"Overview")),i.a.createElement(f.a.Item,{onClick:function(){return n(H.PROJECTS)}},i.a.createElement(f.a.Link,{eventKey:"projects"},"Projects")),a&&i.a.createElement(f.a.Item,{onClick:function(){return n(H.INBOX)}},i.a.createElement(f.a.Link,{eventKey:"inbox"},"Inbox"))),i.a.createElement("hr",null))},a.renderPicture=function(e){return i.a.createElement(h.a,{lg:{span:3,offset:3},xs:{span:6,offset:3}},i.a.createElement(d.a,{src:e.pictureUrl||y.a,roundedCircle:!0,fluid:!0}))},a.renderHeaderRight=function(e){var t=this.props,n=t.isEditable,r=t.onToggleEditable,a=t.onInvite,o=t.onSaveProfile,l=t.tab,c=b.a.isLoggedIn()&&b.a.getToken().username===e.username,s=l===H.OVERVIEW&&c;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,i.a.createElement("b",null,e.username,s&&n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(E.a,{title:"Save Changes",onClick:o}),i.a.createElement(E.h,{title:"Revert Changes",onClick:r})),s&&!n&&i.a.createElement(E.j,{title:"Edit Profile",onClick:r}))),b.a.isLoggedIn()&&!c&&i.a.createElement(v.a,{size:"sm",variant:"dark",onClick:a},"Invite to Project"))},a.render=function(){var e=this.props.profile;return i.a.createElement(u.a.Header,{className:"profile-header"},this.renderNav(e),i.a.createElement(m.a,null,this.renderPicture(e),i.a.createElement(h.a,{className:"profile-header-right",xs:{span:!1}},this.renderHeaderRight(e))))},r}(i.a.Component),w=n("QojX"),j=n("GZeA");function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).onChange=n.onChange.bind(k(n)),n.convertToOptions=n.convertToOptions.bind(k(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.onChange=function(e,t){this.props.onProfileFieldEdit(e,t)},a.convertToOptions=function(e){return e.map((function(e){return{label:e,value:e}}))},a.render=function(){var e=this,t=this.props.profile;return i.a.createElement(w.a,null,i.a.createElement("h4",null,i.a.createElement("span",null,"üë©‚Äçüî¨")," Bio"),i.a.createElement(w.a.Control,{as:"textarea",rows:"3",value:t.bio||"",onChange:function(t){return e.onChange("bio",t.target.value)}}),i.a.createElement("hr",null),i.a.createElement("h4",null,i.a.createElement("span",null,"üß™")," Interests"),i.a.createElement(j.a,{type:"interests",value:t.interests,onChange:function(t){return e.onChange("interests",t)}}),i.a.createElement("hr",null),i.a.createElement("h4",null,i.a.createElement("span",null,"üß∞")," Skills"),i.a.createElement(j.a,{type:"skills",value:t.languages,onChange:function(t){return e.onChange("languages",t)}}))},r}(i.a.Component),x=n("65eO");function O(e){var t=e.profile;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",null,i.a.createElement("span",null,"üë©‚Äçüî¨")," Bio"),i.a.createElement(u.a.Text,null,t.bio||"Apparently, this user prefers to keep an air of mystery about them."),i.a.createElement("hr",null),i.a.createElement("h4",null,i.a.createElement("span",null,"üß™")," Interests"),i.a.createElement("div",{className:"profile-badges"},t.interests.map((function(e){return i.a.createElement(x.a,{pill:!0,key:e,variant:"dark"},e)}))),i.a.createElement("hr",null),i.a.createElement("h4",null,i.a.createElement("span",null,"üß∞")," Skills"),i.a.createElement("div",{className:"profile-badges"},t.languages.map((function(e){return i.a.createElement(x.a,{pill:!0,key:e,variant:"dark"},e)}))))}var I=function(e){var t,n;function r(t){return e.call(this,t)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.profile,n=e.editableProfile,r=e.isEditable,a=e.onProfileFieldEdit;return i.a.createElement(i.a.Fragment,null,r?i.a.createElement(C,{onProfileFieldEdit:a,profile:n}):i.a.createElement(O,{profile:t}))},r}(i.a.Component),T=(n("pJf4"),n("Wbzz"));var S=function(e){var t,n;function r(t){return e.call(this,t)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getPersonalizedText=function(e){var t=this.props.profile;return e?"You have":t.username+" has"},a.renderProjects=function(e,t,n){return i.a.createElement(i.a.Fragment,null,0===e.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"message"},this.getPersonalizedText(n)," not ",t," any projects."),i.a.createElement("br",null)),i.a.createElement("div",{className:"profile-badges"},e.map((function(e){return i.a.createElement(x.a,{pill:!0,key:e.id,variant:"dark"},i.a.createElement(T.Link,{to:"/project/"+e.id},e.name))}))))},a.render=function(){var e=this.props.profile,t=e.ownedProjects.nodes,n=e.projects.nodes,r=b.a.isLoggedIn()&&b.a.getToken().username===e.username;return i.a.createElement("div",{className:"profile-projects"},i.a.createElement("h4",null,"Owned Projects"),this.renderProjects(t,"created",r),i.a.createElement("hr",null),i.a.createElement("h4",null,"Joined Projects"),this.renderProjects(n,"joined",r))},r}(i.a.Component),N=(n("Ml7+"),n("pJDg")),_=n("sjrs"),R=n("yKI6");function F(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){F(o,r,a,i,l,"next",e)}function l(e){F(o,r,a,i,l,"throw",e)}i(void 0)}))}}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var V={pending:{color:"dark"},accepted:{color:"success"},declined:{color:"danger"}},J=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).accept=n.accept.bind(q(n)),n.decline=n.decline.bind(q(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.accept=function(){var e=L(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.getToken().sub,e.prev=1,e.next=4,R.a.accept(n,t);case 4:Object(T.navigate)("/project/"+t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),o.decline=function(){var e=L(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.decline(t);case 3:window.location.reload(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),o.renderRequests=function(e){var t=e.pendingProjects.nodes.filter((function(e){return"request"===e.requestType&&"pending"===e.requestStatus}));return i.a.createElement(i.a.Fragment,null,0===t.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"message"},"You have not requested to join any projects."),i.a.createElement("br",null)),i.a.createElement("div",{className:"profile-badges"},t.map((function(e){return i.a.createElement(x.a,{pill:!0,key:e.id,variant:V[e.requestStatus].color},i.a.createElement(T.Link,{to:"/project/"+e.id},e.name),"¬†(",e.requestStatus,")")}))))},o.renderInvites=function(e){var t=this,n=e.pendingProjects.nodes.filter((function(e){return"invite"===e.requestType&&"pending"===e.requestStatus}));return i.a.createElement(i.a.Fragment,null,0===n.length&&i.a.createElement("span",{className:"message"},"You have not been invited to any projects."),i.a.createElement(_.a,null,n.map((function(e){return i.a.createElement(_.a.Item,{key:e.requestId,className:"invite-list-item"},i.a.createElement(T.Link,{to:"/project/"+e.id},e.name),i.a.createElement(N.a,{className:"invite-actions",size:"sm"},i.a.createElement(v.a,{variant:"success",onClick:function(){return t.accept(e.id)}},"Accept"),i.a.createElement(v.a,{variant:"danger",onClick:function(){return t.decline(e.requestId)}},"Decline")))}))))},o.render=function(){var e=this.props.profile;return i.a.createElement("div",{className:"profile-inbox"},i.a.createElement("h4",null,"Requests"),this.renderRequests(e),i.a.createElement("hr",null),i.a.createElement("h4",null,"Invites"),this.renderInvites(e))},r}(i.a.Component),B=n("KZ7y"),Y=n("Cs6D"),z=n("zM5D"),M=(n("TbOK"),n("V/bX"));function K(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}var W=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={projectOptions:[],selectedProject:null},n.onChange=n.onChange.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){var e,t=(e=a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.a.isLoggedIn()){e.next=2;break}return e.abrupt("return");case 2:return t=b.a.getToken().sub,e.next=5,M.a.getOwnedProjects(t);case 5:n=e.sent,this.setState({projectOptions:n.map(this.convertToOption)});case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){K(o,r,a,i,l,"next",e)}function l(e){K(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),o.convertToOption=function(e){return{label:e.name,value:e.id}},o.onChange=function(e){this.setState({selectedProject:e})},o.render=function(){var e=this.props,t=e.show,n=e.onClose,r=e.onConfirm,a=this.state,o=a.projectOptions,l=a.selectedProject,c=null===l;return i.a.createElement(z.a,{show:t,animation:!1,onHide:n},i.a.createElement(z.a.Header,{closeButton:!0},i.a.createElement(z.a.Title,null,"Invite to Project")),i.a.createElement(z.a.Body,null,"Send an invitation for the following project:",i.a.createElement(Y.a,{className:"modal-select",variant:"dark",options:o,value:l,onChange:this.onChange})),i.a.createElement(z.a.Footer,null,i.a.createElement(v.a,{variant:"dark",onClick:n},"Close"),i.a.createElement(v.a,{variant:"dark",disabled:c,onClick:function(){return r(l.value)}},"Confirm")))},r}(i.a.Component);function Z(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Z(o,r,a,i,l,"next",e)}function l(e){Z(o,r,a,i,l,"throw",e)}i(void 0)}))}}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var H={OVERVIEW:"overview",PROJECTS:"projects",INBOX:"inbox"},U=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).state={profile:null,editableProfile:null,isEditable:!1,tab:H.OVERVIEW,finishedLoading:!1,showInviteModal:!1};var r=n.props.location.search;return n.urlParams=new URLSearchParams(r),n.toggleEditable=n.toggleEditable.bind(G(n)),n.onProfileFieldEdit=n.onProfileFieldEdit.bind(G(n)),n.saveProfile=n.saveProfile.bind(G(n)),n.inviteToProject=n.inviteToProject.bind(G(n)),n.changeTab=n.changeTab.bind(G(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){var e=D(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setTabFromURL(),t=this.props["*"]){e.next=5;break}return this.setState({finishedLoading:!0}),e.abrupt("return");case 5:return e.prev=5,e.next=8,p.a.getProfile(t);case 8:n=e.sent,this.setState({profile:n,editableProfile:Object.assign({},n),finishedLoading:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),this.setState({finishedLoading:!0}),console.log(e.t0);case 16:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),o.setTabFromURL=function(){var e=this.urlParams.get("tab")||H.OVERVIEW;this.changeTab(e)},o.changeTab=function(e){this.setState({tab:e}),this.urlParams.set("tab",e),window.history.replaceState({},"","?"+this.urlParams.toString())},o.toggleEditable=function(){this.setState((function(e){return{isEditable:!e.isEditable}}))},o.onProfileFieldEdit=function(e,t){var n=this.state.editableProfile;n[e]=t,this.setState({editableProfile:n})},o.saveProfile=function(){var e=D(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.editableProfile,e.prev=1,e.next=4,p.a.updateProfile(t);case 4:this.setState({profile:Object.assign({},t)}),this.toggleEditable(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),o.inviteToProject=function(){var e=D(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.profile,r=this.props.showAlert,this.setState({showInviteModal:!1}),e.prev=3,e.next=6,M.a.createInvite(n.id,t);case 6:r("You have invited this user to your project.","success"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),r("You have already invited this user.","warning");case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),o.render=function(){var e=this,t=this.state,n=t.profile,r=t.editableProfile,a=t.tab,o=t.isEditable,l=t.finishedLoading,s=t.showInviteModal;return n?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,null,i.a.createElement("title",null,n.username)),i.a.createElement(W,{show:s,onConfirm:this.inviteToProject,onClose:function(){return e.setState({showInviteModal:!1})}}),i.a.createElement(u.a,{className:"profile-container",bg:"secondary",border:"secondary"},i.a.createElement(P,{profile:n,tab:a,isEditable:o,onSaveProfile:this.saveProfile,onToggleEditable:this.toggleEditable,onInvite:function(){return e.setState({showInviteModal:!0})},onTabChange:this.changeTab}),i.a.createElement(u.a.Body,null,a===H.OVERVIEW&&i.a.createElement(I,{profile:n,editableProfile:r,isEditable:o,onProfileFieldEdit:this.onProfileFieldEdit}),a===H.PROJECTS&&i.a.createElement(S,{profile:n}),a===H.INBOX&&i.a.createElement(J,{profile:n})))):i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,null,i.a.createElement("title",null,"Profile")),l?i.a.createElement("h5",null,"Profile not found."):i.a.createElement(B.a,null))},r}(i.a.Component),X=Object(s.b)(U,"profile-page");t.default=function(e){return i.a.createElement(l.Location,null,(function(t){var n=t.location;return i.a.createElement(l.Router,{location:n,basepath:"/profile"},i.a.createElement(X,Object.assign({},e,{path:"/:username"})))}))}},B5eY:function(e,t,n){e.exports=n.p+"static/default-profile-f540a12d889f1ab9ed9a6cee78a03dac.png"}}]);
//# sourceMappingURL=component---src-pages-profile-js-97ef0c650ad74fd3b315.js.map